
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>To-Do List</title>
  <style>
	body {
	  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	  background: linear-gradient(to right, #d4fc79, #96e6a1);
	  margin: 30px;
	  padding: 20px;
	}

    h1 {
      color: #2e7d32;
      text-align: center;
      font-size: 2.5em;
    }

    form.task-form, .add-task-form {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }

    input, button {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
    }

    input[type="text"], input[type="datetime-local"] {
      width: 180px;
    }

    button {
      background-color: #66bb6a;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #388e3c;
    }

    #enableSound {
      background-color: #ffa726;
    }

    #enableSound:hover {
      background-color: #fb8c00;
    }

    .task-group {
      background-color: #e8f5e9;
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      width: 50%;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .task-group h2 {
      color: #388e3c;
    }

    .task {
      background-color: #fffdef;
      border-left: 5px solid #4caf50;
	  
      margin: 10px 0;
      padding: 15px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
      transition: 0.3s;
    }

    .task:hover {
      transform: scale(1.02);
    }

    .completed {
      text-decoration: line-through;
      color: #4caf50;
      opacity: 0.6;
    }

    .task p {
      margin: 0;
      font-size: 1.1em;
    }

    .task button {
      margin-top: 10px;
      background-color: #ef5350;
    }

    .task button:hover {
      background-color: #c62828;
    }

    .delete-day-button {
      margin-top: 15px;
      background-color: #b71c1c;
    }

    .delete-day-button:hover {
      background-color: #880e4f;
    }
  </style>
</head>
<body>

<h1>My Daily Tasks</h1>

<form method="post" action="/add" class="add-task-form">
  <input type="text" name="title" placeholder="Task title" required>
  <input type="text" name="description" placeholder="Description">
  <input type="datetime-local" name="scheduledTime" required>
  <button type="submit">Add Task</button>
</form>

<div id="tasks">
  <div th:each="entry : ${tasksByDate}" class="task-group">
    <h2 th:text="${entry.key}">2025-07-20</h2>

    <div th:each="task : ${entry.value}" class="task" th:classappend="${task.completed} ? 'completed'">
      <p>
        <strong th:text="${task.title}"></strong> -
        <span th:text="${task.description}"></span> |
        <span th:text="${task.scheduledTime}"></span>
      </p>
      <form th:action="@{'/complete/' + ${task.id}}" method="post">
        <button type="submit" th:disabled="${task.completed}">Mark Complete</button>
      </form>
    </div>

    <form method="post" action="/deleteByDate" class="task-form">
      <input type="hidden" name="date" th:value="${entry.key}" />
      <button type="submit" class="delete-day-button">ðŸ—‘ Delete All Tasks for This Day</button>
    </form>
  </div>
</div>

<!-- âœ… FIXED: Correct file path with extension -->
<audio id="notify" src="/notification.mp3" preload="auto"></audio>



</body>
</html>
